var Otto=function(){"use strict";function w(e,t){for(var n=arguments,o=[],l=[],r=arguments.length;2<r--;)o.push(n[r]);for(;o.length;){var i=o.pop();if(i&&i.pop)for(r=i.length;r--;)o.push(i[r]);else null!=i&&!0!==i&&!1!==i&&l.push(i)}return"function"==typeof e?e(t||{},l):{nodeName:e,attributes:t||{},children:l,key:t&&t.key}}function o(e,t,n,o){var l,r=[].map,i=o&&o.children[0]||null,u=i&&function t(e){return{nodeName:e.nodeName.toLowerCase(),attributes:{},children:r.call(e.childNodes,function(e){return 3===e.nodeType?e.nodeValue:t(e)})}}(i),s=[],y=!0,c=p(e),a=function e(o,l,r){for(var t in r)"function"==typeof r[t]?function(e,n){r[e]=function(e){var t=n(e);return"function"==typeof t&&(t=t(h(o,c),r)),t&&t!==(l=h(o,c))&&!t.then&&f(c=v(o,p(l,t),c)),t}}(t,r[t]):e(o.concat(t),l[t]=p(l[t]),r[t]=p(r[t]));return r}([],c,p(t));return f(),a;function w(e){return"function"==typeof e?w(e(c,a)):null!=e?e:""}function d(){l=!l;var e=w(n);for(o&&!l&&(i=function e(t,n,o,l,r){if(l===o);else if(null==o||o.nodeName!==l.nodeName){var i=b(l,r);t.insertBefore(i,n),null!=o&&I(t,n,o),n=i}else if(null==o.nodeName)n.nodeValue=l;else{S(n,o.attributes,l.attributes,r=r||"svg"===l.nodeName);for(var u={},s={},c=[],a=o.children,d=l.children,f=0;f<a.length;f++){c[f]=n.childNodes[f];var p=g(a[f]);null!=p&&(u[p]=[c[f],a[f]])}for(var f=0,v=0;v<d.length;){var p=g(a[f]),h=g(d[v]=w(d[v]));if(s[p])f++;else if(null==h||h!==g(a[f+1]))if(null==h||y)null==p&&(e(n,c[f],a[f],d[v],r),v++),f++;else{var m=u[h]||[];p===h?(e(n,m[0],m[1],d[v],r),f++):m[0]?e(n,n.insertBefore(m[0],c[f]),m[1],d[v],r):e(n,c[f],null,d[v],r),s[h]=d[v],v++}else null==p&&I(n,c[f],a[f]),f++}for(;f<a.length;)null==g(a[f])&&I(n,c[f],a[f]),f++;for(var f in u)s[f]||I(n,u[f][0],u[f][1])}return n}(o,i,u,u=e)),y=!1;s.length;)s.pop()()}function f(){l||(l=!0,setTimeout(d))}function p(e,t){var n={};for(var o in e)n[o]=e[o];for(var o in t)n[o]=t[o];return n}function v(e,t,n){var o={};return e.length?(o[e[0]]=1<e.length?v(e.slice(1),t,n[e[0]]):t,p(n,o)):t}function h(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function g(e){return e?e.key:null}function m(e){return e.currentTarget.events[e.type](e)}function C(e,t,n,o,l){if("key"===t);else if("style"===t)if("string"==typeof n)e.style.cssText=n;else for(var r in"string"==typeof o&&(o=e.style.cssText=""),p(o,n)){var i=null==n||null==n[r]?"":n[r];"-"===r[0]?e.style.setProperty(r,i):e.style[r]=i}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?o||(o=e.events[t]):e.events={},(e.events[t]=n)?o||e.addEventListener(t,m):e.removeEventListener(t,m)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!l?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),null!=n&&!1!==n||e.removeAttribute(t)}function b(e,t){var n="string"==typeof e||"number"==typeof e?document.createTextNode(e):(t=t||"svg"===e.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",e.nodeName):document.createElement(e.nodeName),o=e.attributes;if(o){o.oncreate&&s.push(function(){o.oncreate(n)});for(var l=0;l<e.children.length;l++)n.appendChild(b(e.children[l]=w(e.children[l]),t));for(var r in o)C(n,r,o[r],null,t)}return n}function S(e,t,n,o){for(var l in p(t,n))n[l]!==("value"===l||"checked"===l?e[l]:t[l])&&C(e,l,n[l],t[l],o);var r=y?n.oncreate:n.onupdate;r&&s.push(function(){r(e,t)})}function I(e,t,n){function o(){e.removeChild(function e(t,n){var o=n.attributes;if(o){for(var l=0;l<n.children.length;l++)e(t.childNodes[l],n.children[l]);o.ondestroy&&o.ondestroy(t)}return t}(t,n))}var l=n.attributes&&n.attributes.onremove;l?l(t,o):o()}}var g=function(e){var t,n,o,l,r,i,u=e.liClass,s=e.choice,c=e.isSelected,a=e.inputVal,d=e.renderItem,f=e.onmousedown,p={key:s.value,class:("otto-li "+u+" "+(c?"otto-selected":"")).trim(),style:{listStyleType:"none",cursor:"default"},onmousedown:function(){return f(s.value)},onupdate:function(e){c&&e.scrollIntoView({block:"nearest"})}};return d?(p.oncreate=function(e){return e.innerHTML=d(s,a)},w("li",p)):w("li",p,-1<s.label.toUpperCase().indexOf(a.toUpperCase())?(t=a,i=s.label,n=i.replace(/&/g,"").replace(/</g,"").replace(/>/g,""),o=t.length,l=n.toUpperCase().indexOf(t.toUpperCase()),[(r={beg:n.slice(0,l),mid:n.slice(l,l+o),end:n.slice(l+o)}).beg,w("b",{},r.mid),r.end]):w("i",{style:{opacity:"0.5"}},s.label))};var C=function(e){return w("div",{className:"otto-spinner-dot",style:{borderRadius:"2em",margin:"0 0.1em",display:"inline-block",height:"6px",width:"6px",opacity:e||"0.3",transition:"all 0.3s ease",backgroundColor:"black"}})},l=function(){return function(n,o){var e,t,l,r,i,u,s,c,a,d,f,p,v=n.filtered,h=n.showClearBtn&&n.inputVal&&null!==n.inputRef,m=n.showSpinner&&n.isFetching&&null!==n.inputRef,y=n.selectMode&&v.length<1;return w("div",{class:n.divClass,style:{position:"relative"}},w("div",{style:{position:"relative"}},n.selectMode?function(n,e){return w("input",{key:"input",id:n.inputId,class:n.inputClass,autocomplete:"off",value:n.inputVal,oninput:e.onSelectInput,onmousedown:e.onSelectInputMousedown,onkeydown:e.onInputKeydown,oncreate:function(t){e.setFiltered(n.all),e.setInputRef(t),n.events&&Object.keys(n.events).forEach(function(e){t.addEventListener(e,n.events[e])})},onblur:function(){e.setShowDropdown(!1),e.onSelectInputBlur()},style:{boxSizing:"border-box"}})}:function(n,e){return w("input",{key:"input",id:n.inputId,class:n.inputClass,autocomplete:"off",value:n.inputVal,oninput:e.onInput,onkeydown:e.onInputKeydown,onfocus:function(){n.filtered.length?e.setShowDropdown(!0):e.setShowDropdown(!1)},onblur:function(){e.setShowDropdown(!1),e.setSelected(null)},oncreate:function(t){e.setInputRef(t),n.events&&Object.keys(n.events).forEach(function(e){t.addEventListener(e,n.events[e])})},style:{boxSizing:"border-box"}})},h&&(f={inputRef:n.inputRef,clearInput:o.onClearInputBtnClick},p=f.inputRef,w("div",{key:"clearBtn",class:"otto-clear",onclick:f.clearInput,oncreate:function(e){return e.innerHTML="&times;"},style:{opacity:"0.7",position:"absolute",display:"flex",alignItems:"center",top:p.offsetHeight/2-11+"px",right:"0.6em",cursor:"pointer",fontFamily:"sans-serif",fontWeight:"400",fontSize:"20px",height:"22px"}})),m&&(s={inputRef:n.inputRef,setTimer:o.setTimer,clearTimer:o.clearTimer},c=s.inputRef,a=s.setTimer,d=s.clearTimer,w("div",{key:"spinner",style:{class:"otto-spinner",position:"absolute",display:"flex",alignItems:"center",top:c.offsetHeight/2-3+"px",right:"2.6em"},ondestroy:function(){d()},oncreate:function(e){var t=1,n=e.childNodes;a(setInterval(function(){for(var e=0;e<n.length;e++)n[e].style.opacity="0.3";t===n.length&&(t=0),n[t].style.opacity="0.7",t+=1},300))}},[C("0.7"),C(),C()]))),n.showDropdown&&(e={dropdownClass:n.dropdownClass,isSelectMode:n.selectMode},i={ulClass:n.ulClass},u=y?w("li",{style:{listStyleType:"none",textAlign:"center",padding:"0.5em",opacity:"0.5"}},{emptyMsg:n.emptyMsg}.emptyMsg):v.map(function(e,t){return g({liClass:n.liClass,choice:e,isSelected:n.selected===t,inputVal:n.inputVal,renderItem:n.renderItem,onmousedown:o.onListElementMouseDown})}),t=w("ul",{class:("otto-ul "+i.ulClass).trim()},u),l=e.dropdownClass,r=e.isSelectMode,w("div",{class:("otto-dropdown "+l).trim(),style:{position:"absolute",maxHeight:r?"300px":null,width:"100%",backgroundColor:"white",overflow:"hidden",overflowY:r?"auto":null,zIndex:"99"}},t)))}},i=function(e,t,l,n){var r=e.toUpperCase(),o=t.filter(function(e){var t=e.label,n=t.toUpperCase().indexOf(r),o=!l||(void 0===t[n-1]||" "===t[n-1]);return-1<n&&o});return void 0!==n&&(o=o.slice(0,n)),o},r=function(e){return Object.assign({},e,{label:e.label,value:e.value||e.label})},u=function(e){return null!==e&&e.constructor===Object},s={setAll:function(e){return{all:e}},setFiltered:function(e){return{filtered:e}},setShowDropdown:function(e){return{showDropdown:e}},setIsFetching:function(e){return{isFetching:e}},setSelected:function(e){return{selected:e}},setInputRef:function(e){return{inputRef:e}},setTimer:function(e){return{timer:e}},setInputVal:function(t){return function(e){return e.valueEvent&&e.valueEvent(t),{inputVal:t}}},addToCache:function(n){return function(e){var t=Object.assign({},e.cache);return t[n.key]=[].concat(n.choices),{cache:t}}},onInput:function(t){return function(o,l){var r=t.target.value;l.setInputVal(r);var e=function(e){var t=i(r,e,o.matchFullWord,o.maxResults);l.setAll(e),l.setFiltered(t);var n=0<t.length;l.setShowDropdown(n),n||l.setSelected(null)};r&&r.trim().length>=o.minChars?o.source?l.fetchFromSource(e):e(o.all):(l.setFiltered([]),l.setShowDropdown(!1),l.setSelected(null))}},onInputKeydown:function(r){return function(e,t){if(38!=r.keyCode&&40!=r.keyCode||!e.showDropdown||(r.preventDefault(),38==r.keyCode&&t.decrementSelected(),40==r.keyCode&&t.incrementSelected()),9==r.keyCode||13==r.keyCode)if(e.showDropdown){r.preventDefault();var n=void 0;if(null!==e.selected){var o=e.filtered[e.selected];e.selectEvent&&e.selectEvent(o),n=o.value,t.setInputVal(n)}var l=i(n||e.inputVal,e.all,e.matchFullWord,e.maxResults);t.setFiltered(l),t.setSelected(null),t.setShowDropdown(!1)}else 13==r.keyCode&&e.enterEvent&&e.enterEvent(r)}},incrementSelected:function(){return function(e,t){e.showDropdown?null===e.selected?t.setSelected(0):e.selected!==e.filtered.length-1&&t.setSelected(e.selected+1):t.setSelected(null)}},decrementSelected:function(){return function(e,t){e.showDropdown?null===e.selected||0===e.selected?t.setSelected(0):t.setSelected(e.selected-1):t.setSelected(null)}},onSelectInput:function(t){return function(n,o){var l=t.target.value;if(o.setInputVal(l),n.source)o.fetchFromSource(function(e){var t=i(l,e,n.matchFullWord);o.setAll(e),o.setFiltered(t)});else if(""===l.trim())o.setFiltered(n.all);else{var e=i(l,n.all,n.matchFullWord);o.setFiltered(e)}}},onSelectInputMousedown:function(){return function(e,t){e.source?t.fetchFromSource(function(e){t.setAll(e),t.setFiltered(e),t.setShowDropdown(!0)}):t.setShowDropdown(!0)}},onSelectInputBlur:function(){return function(e,t){for(var n=e.inputVal,o=null,l=0;l<e.all.length;l++)if(e.all[l].value.toUpperCase()===n.trim().toUpperCase()){o=e.all[l].value;break}o?t.setInputVal(o):t.setInputVal(""),t.setFiltered(e.all)}},onListElementMouseDown:function(o){return function(e,t){var n=i(o,e.all,e.matchFullWord,e.maxResults);t.setInputVal(o),t.setFiltered(n),t.focusInputAndHideDropdown()}},onClearInputBtnClick:function(){return function(e,t){t.setInputVal(""),e.selectMode||t.setFiltered([]),t.focusInputAndHideDropdown()}},clearTimer:function(){return function(e){clearInterval(e.timer)}},focusInputAndHideDropdown:function(){return function(e,t){setTimeout(function(){e.inputRef.focus(),t.setShowDropdown(!1)})}},fetchFromSource:function(l){return function(e,n){var o=e.inputVal.toUpperCase().trim();e.cache[o]?l(e.cache[o]):(n.setIsFetching(!0),e.source(e.inputVal,function(e){var t=e||[];t=t.map(r),n.addToCache({key:o,choices:t}),n.setIsFetching(!1),l(t)}))}}};return function(e,t,n){if(!u(t))throw"Otto Error: `config` must be an object.";if(void 0!==n&&!Array.isArray(n))throw"Otto Error: `choices` must be an array of objects.";return void 0!==n&&(n.forEach(function(e){if(!u(e)||!e.label)throw"Otto Error: All choices must be objects with a `label` attribute."}),n=n.map(r)),{actions:o({showDropdown:!1,isFetching:!1,selected:null,inputRef:null,inputVal:"",timer:void 0,cache:{},filtered:[],all:n||[],inputId:t.inputId||null,inputClass:t.inputClass||null,divClass:t.divClass||null,dropdownClass:t.dropdownClass||"",ulClass:t.ulClass||"",liClass:t.liClass||"",showClearBtn:t.showClearBtn||!0,showSpinner:t.showSpinner||!0,emptyMsg:t.emptyMsg||"No Options",selectMode:t.selectMode||!1,matchFullWord:t.matchFullWord||!1,minChars:t.minChars||3,maxResults:t.maxResults||7,enterEvent:t.enterEvent||null,valueEvent:t.valueEvent||null,renderItem:t.renderItem||null,selectEvent:t.selectEvent||null,events:t.events||null,source:t.source||null},s,function(){return l()},e)}}}();

!function(){"use strict";var e=function(){var e=3,t=7;return function(i,n,s){var l,o,h,c,a;this.config=n,this.inputValue="",this.selected=null,this.allChoices=s||[],this.filteredChoices=[],this.root=function(t){var i=t;i.autocomplete="off";var n=function(t){var i=this.config.minChars||e,n=this.config.source||null;this.inputValue=t.target.value,this.config.valueEvent&&this.config.valueEvent(this.inputValue),this.inputValue.length>=i?null!==n?n(this.inputValue,function(e){this.allChoices=e||[],this.inputValue.length>0&&(this.applyFilter(),this.updateList())}.bind(this)):(this.applyFilter(),this.updateList()):(this.filteredChoices=[],this.updateList())}.bind(this),s=function(e){null!==this.selected&&(this.inputValue=i.value=this.selected,this.config.valueEvent&&this.config.valueEvent(this.inputValue)),this.config.enterEvent&&1==this.dropDown.hidden&&this.config.enterEvent(e),this.dropDown.hidden=!0}.bind(this),l=function(e){var t=document.getElementsByClassName("otto-li"),i=t.length,n=null;if(i>0){for(var s=0;s<i;s++)t[s].className.indexOf("selected")>-1&&(n=s);40==e.keyCode?null!==n&&n<i-1?(t[n].className=t[n].className.replace(" selected",""),t[n+1].className+=" selected",this.selected=t[n+1].innerText):null===n&&(t[0].className+=" selected",this.selected=t[0].innerText):38==e.keyCode&&null!==n&&n>0&&(t[n].className=t[n].className.replace(" selected",""),t[n-1].className+=" selected",this.selected=t[n-1].innerText)}}.bind(this);return i.onkeydown=function(e){this.config.events&&this.config.events.onkeydown&&this.config.events.onkeydown(e),38==e.keyCode||40==e.keyCode?(e.preventDefault(),l(e)):13==e.keyCode&&(e.preventDefault(),s(e))}.bind(this),i.oninput=function(e){this.config.events&&this.config.events.oninput&&this.config.events.oninput(e),n(e)}.bind(this),i.onfocus=function(){this.config.events&&this.config.events.onfocus&&this.config.events.onfocus(ev),this.filteredChoices.length>0&&(this.dropDown.hidden=!1)}.bind(this),i.onblur=function(){this.config.events&&this.config.events.onblur&&this.config.events.onblur(ev),setTimeout(function(){this.dropDown.hidden=!0}.bind(this),100)}.bind(this),this.config.events&&Object.keys(this.config.events).forEach(function(e){["onkeydown","oninput","onblur","onfocus"].indexOf(e)<=-1&&(i[e]=this.config.events[e])}.bind(this)),i}.call(this,i),this.dropDown=(l=this.root.getBoundingClientRect(),o=n.divClass||"",(h=document.createElement("div")).className="otto-div "+o,h.style.width=l.width.toString()+"px",h.style.top=(l.height+l.top+2).toString()+"px",h.style.backgroundColor="white",h.style.position="absolute",h.style.zIndex="9999",h.hidden=!0,h),this.ulElement=(c=n.ulClass||"",(a=document.createElement("ul")).className="otto-ul "+c,a),this.dropDown.appendChild(this.ulElement),this.root.insertAdjacentElement("afterend",this.dropDown),this.applyFilter=function(){var e=[],i=this.config.maxResults||t;this.filteredChoices=[];for(var n=this.allChoices.filter(function(t){var i=t.toUpperCase().indexOf(this.inputValue.toUpperCase()),n=!this.config.matchFullWord||void 0===t[i-1]||" "==t[i-1];if(i>-1&&n)return e.push({index:i,len:this.inputValue.length}),!0}.bind(this)),s=0;s<Math.min(i,n.length);s++)this.filteredChoices.push(n[s].slice(0,e[s].index)+"<b>"+n[s].slice(e[s].index,e[s].index+e[s].len)+"</b>"+n[s].slice(e[s].index+e[s].len))},this.clearSelected=function(){var e=document.getElementsByClassName("otto-li selected");e.length>0&&(e[0].className=e[0].className.replace(" selected",""))},this.updateList=function(){this.ulElement.innerHTML="",this.filteredChoices.forEach(function(e){var t=function(e,t){var i=document.createElement("li");return i.className="otto-li "+t,i.style.listStyleType="none",i.innerHTML=e,i.style.cursor="default",i.addEventListener("mouseenter",function(e){this.clearSelected(),e.target.className+=" selected",this.selected=e.target.innerText}.bind(this)),i.addEventListener("mouseleave",function(e){e.target.className=e.target.className.replace(" selected",""),this.selected=null}.bind(this)),i.onclick=function(){this.inputValue=this.root.value=this.selected,this.filteredChoices=[],this.config.valueEvent&&this.config.valueEvent(this.inputValue)}.bind(this),i}.call(this,e,n.liClass||"");this.ulElement.appendChild(t)}.bind(this)),this.filteredChoices.length<1?this.dropDown.hidden=!0:this.dropDown.hidden=!1},this.updateList()}}();"undefined"!=typeof module&&"object"==typeof exports?module.exports=e:(this||("undefined"!=typeof window?window:global)).Otto=e}();